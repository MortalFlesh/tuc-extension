{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "TypedUseCase",
    "patterns": [
        {
            "include": "#comments"
        },
        {
            "include": "#tuc.name"
        },
        {
            "include": "#tuc.participants"
        },
        {
            "include": "#tuc.parts"
        }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "name": "comment.line",
                    "match": "//.*"
                }
            ]
        },
        "tuc.name": {
            "patterns": [
                {
                    "name": "invalid.tuc.name.indented",
                    "begin": "^.+tuc",
                    "end": "$|\\n",
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "invalid.tuc.name.value",
                            "match": ".+?"
                        }
                    ]
                },
                {
                    "name": "invalid.tuc.name.empty",
                    "match": "^tuc\\s*$|\\n"
                },
                {
                    "name": "tuc.name",
                    "begin": "^tuc",
                    "end": "$|\\n",
                    "beginCaptures": {
                        "0": {
                            "name": "entity.name.type.tuc.name"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "entity.name.function.tuc.name",
                            "match": ".+?"
                        }
                    ]
                }
            ]
        },
        "tuc.participants": {
            "patterns": [
                {
                    "name": "invalid.participants",
                    "patterns": [
                        {
                            "name": "invalid.participants.indented",
                            "begin": "^.+participants",
                            "end": "$|\\n",
                            "patterns": [
                                {
                                    "include": "#comments"
                                },
                                {
                                    "name": "invalid.participants",
                                    "match": ".+?"
                                }
                            ]
                        }
                    ]
                },
                {
                    "patterns": [
                        {
                            "begin": "^(participants)",
                            "beginCaptures": {
                                "1": {
                                    "name": "entity.name.class.participants"
                                }
                            },
                            "end": "^(?!\\s)",
                            "patterns": [
                                {
                                    "include": "#comments"
                                },
                                {
                                    "name": "participant.data-object.stream.with-alias",
                                    "begin": "^\\s+(\\[)(\\w+Stream)(\\]) (\\w+) (as \".+?\")",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.stream.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name",
                                            "patterns": [
                                                {
                                                    "name": "emphasis",
                                                    "match": ".*"
                                                }
                                            ]
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.stream.close"
                                        },
                                        "4": {
                                            "name": "keyword.other.unit.participant.domain"
                                        },
                                        "5": {
                                            "name": "entity.name.tag.alias",
                                            "patterns": [
                                                {
                                                    "include": "#strings"
                                                }
                                            ]
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object.stream.no-domain.with-alias",
                                    "begin": "^\\s+(\\[)(\\w+Stream)(\\]) (as \".+?\")",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.stream.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name",
                                            "patterns": [
                                                {
                                                    "name": "emphasis",
                                                    "match": ".*"
                                                }
                                            ]
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.stream.close"
                                        },
                                        "4": {
                                            "name": "entity.name.tag.alias",
                                            "patterns": [
                                                {
                                                    "include": "#strings"
                                                }
                                            ]
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object.stream",
                                    "begin": "^\\s+(\\[)(\\w+Stream)(\\]) (\\w+)",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.stream.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name",
                                            "patterns": [
                                                {
                                                    "name": "emphasis.stream.name",
                                                    "match": ".*"
                                                }
                                            ]
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.stream.close"
                                        },
                                        "4": {
                                            "name": "keyword.other.unit.participant.domain"
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object.no-domain.stream",
                                    "begin": "^\\s+(\\[)(\\w+Stream)(\\]) (\\w+)",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.stream.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name",
                                            "patterns": [
                                                {
                                                    "name": "emphasis.stream.name",
                                                    "match": ".*"
                                                }
                                            ]
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.stream.close"
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object.with-alias",
                                    "begin": "^\\s+(\\[)(\\w+)(\\]) (\\w+) (as \".+?\")",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.close"
                                        },
                                        "4": {
                                            "name": "keyword.other.unit.participant.domain"
                                        },
                                        "5": {
                                            "name": "entity.name.tag.alias",
                                            "patterns": [
                                                {
                                                    "include": "#strings"
                                                }
                                            ]
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object.no-domain.with-alias",
                                    "begin": "^\\s+(\\[)(\\w+)(\\]) (as \".+?\")",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.close"
                                        },
                                        "4": {
                                            "name": "entity.name.tag.alias",
                                            "patterns": [
                                                {
                                                    "include": "#strings"
                                                }
                                            ]
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object",
                                    "begin": "^\\s+(\\[)(\\w+)(\\]) (\\w+)",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.close"
                                        },
                                        "4": {
                                            "name": "keyword.other.unit.participant.domain"
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.data-object.no-domain",
                                    "begin": "^\\s+(\\[)(\\w+)(\\])",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "variable.language.data-object.open"
                                        },
                                        "2": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "3": {
                                            "name": "variable.language.data-object.close"
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.with-alias",
                                    "begin": "^\\s+(\\w+) (\\w+) (as \".+?\")",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "2": {
                                            "name": "keyword.other.unit.participant.domain"
                                        },
                                        "3": {
                                            "name": "entity.name.tag.alias",
                                            "patterns": [
                                                {
                                                    "include": "#strings"
                                                }
                                            ]
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.no-domain.with-alias",
                                    "begin": "^\\s+(\\w+) (as \".+?\")",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "2": {
                                            "name": "entity.name.tag.alias",
                                            "patterns": [
                                                {
                                                    "include": "#strings"
                                                }
                                            ]
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant",
                                    "begin": "^\\s+(\\w+) (\\w+)",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        },
                                        "2": {
                                            "name": "keyword.other.unit.participant.domain"
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                },
                                {
                                    "name": "participant.no-domain",
                                    "begin": "^\\s+(\\w+)",
                                    "beginCaptures": {
                                        "1": {
                                            "name": "entity.other.attribute-name.participant.name"
                                        }
                                    },
                                    "end": "\\s*$",
                                    "patterns": [
                                        {
                                            "include": "#comments"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "tuc.parts": {
            "patterns": [
                {
                    "include": "#parts.section"
                },
                {
                    "include": "#parts.group"
                },
                {
                    "include": "#parts.loop"
                },
                {
                    "include": "#parts.if-else"
                },
                {
                    "include": "#parts.notes"
                },
                {
                    "include": "#parts.do"
                },
                {
                    "include": "#parts.data-objects.read"
                },
                {
                    "include": "#parts.data-objects.write"
                },
                {
                    "include": "#parts.calls"
                },
                {
                    "include": "#parts.lifeline"
                },
                {
                    "include": "#parts.handle-stream"
                }
            ]
        },
        "parts.section": {
            "patterns": [
                {
                    "name": "invalid.section.indented",
                    "begin": "^.+section",
                    "end": "$|\\n",
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "invalid.section.value",
                            "match": ".+?"
                        }
                    ]
                },
                {
                    "name": "invalid.section.empty",
                    "match": "^section\\s*$|\\n"
                },
                {
                    "name": "section.name",
                    "begin": "^section",
                    "end": "$|\\n",
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.section"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "entity.name.function.section",
                            "match": ".+?"
                        }
                    ]
                }
            ]
        },
        "parts.group": {
            "patterns": [
                {
                    "name": "invalid.group.empty",
                    "match": "group\\s*$|\\n"
                },
                {
                    "name": "group.name",
                    "begin": "\\b(group)\\b",
                    "end": "$|\\n",
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.group"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "entity.name.function.group",
                            "match": ".+?"
                        }
                    ]
                }
            ]
        },
        "parts.loop": {
            "patterns": [
                {
                    "name": "invalid.loop.empty",
                    "match": "loop\\s*$|\\n"
                },
                {
                    "name": "loop.name",
                    "begin": "\\b(loop)\\b",
                    "end": "$|\\n",
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.control.loop"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "variable.other.loop.condition",
                            "match": ".+?"
                        }
                    ]
                }
            ]
        },
        "parts.if-else": {
            "patterns": [
                {
                    "name": "invalid.if.empty",
                    "match": "if\\s*$|\\n"
                },
                {
                    "name": "if",
                    "begin": "\\b(if)\\b",
                    "end": "$|\\n",
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.control.if"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "variable.other.if.condition",
                            "match": ".+?"
                        }
                    ]
                },
                {
                    "name": "else",
                    "begin": "\\b(else)\\b",
                    "end": "$|\\n",
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.control.if.else"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comments"
                        },
                        {
                            "name": "invalid.if.else",
                            "match": ".+?"
                        }
                    ]
                }
            ]
        },
        "formatted": {
            "patterns": [
                {
                    "name": "markup.bold",
                    "match": "\\*{2}.+?\\*{2}"
                },
                {
                    "name": "markup.italic",
                    "match": "\\*.+?\\*"
                },
                {
                    "name": "markup.underline",
                    "match": "_{2}.+?_{2}"
                },
                {
                    "name": "markup.underline.waved",
                    "match": "~{2}.+?~{2}"
                },
                {
                    "name": "variable.link",
                    "begin": "(\\[{2})",
                    "beginCaptures": {
                        "1": {
                            "name": "constant.character.link.start"
                        }
                    },
                    "end": "(\\]{2})",
                    "endCaptures": {
                        "1": {
                            "name": "constant.character.link.end"
                        }
                    },
                    "patterns": [
                        {
                            "name": "link.only-tooltip",
                            "begin": "(\\{)([^\\}]*)",
                            "beginCaptures": {
                                "1": {
                                    "name": "constant.character.tooltip.start"
                                },
                                "2": {
                                    "name": "string.link.tooltip.value"
                                }
                            },
                            "end": "(\\})",
                            "endCaptures": {
                                "1": {
                                    "name": "constant.character.tooltip.end"
                                }
                            }
                        },
                        {
                            "name": "link.with-tooltip",
                            "begin": "(.+?) (\\{)([^\\}]*)",
                            "beginCaptures": {
                                "1": {
                                    "name": "markup.underline.link.value"
                                },
                                "2": {
                                    "name": "constant.character.tooltip.start"
                                },
                                "3": {
                                    "name": "string.link.tooltip.value"
                                }
                            },
                            "end": "(\\})",
                            "endCaptures": {
                                "1": {
                                    "name": "constant.character.tooltip.end"
                                }
                            }
                        },
                        {
                            "name": "markup.underline.link.value",
                            "match": ".+?"
                        }
                    ]
                }
            ]
        },
        "parts.notes": {
            "patterns": [
                {
                    "name": "string.quoted.triple.multi-line-note",
                    "begin": "\"{3}",
                    "end": "\"{3}",
                    "patterns": [
                        {
                            "include": "#formatted"
                        }
                    ]
                },
                {
                    "name": "string.quoted.triple.multi-line-note.left",
                    "begin": "\"<\"",
                    "end": "\"<\"",
                    "patterns": [
                        {
                            "include": "#formatted"
                        }
                    ]
                },
                {
                    "name": "string.quoted.triple.multi-line-note.right",
                    "begin": "\">\"",
                    "end": "\">\"",
                    "patterns": [
                        {
                            "include": "#formatted"
                        }
                    ]
                },
                {
                    "name": "string.quoted.double.one-line-note.left",
                    "begin": "(\")(<)",
                    "beginCaptures": {
                        "1": {
                            "name": "note.one-line.start"
                        },
                        "2": {
                            "name": "constant.character.one-line.left.start"
                        }
                    },
                    "end": "(\")",
                    "endCaptures": {
                        "1": {
                            "name": "note.one-line.end"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#formatted"
                        }
                    ]
                },
                {
                    "name": "string.quoted.double.one-line-note.right",
                    "begin": "(\")(>)",
                    "beginCaptures": {
                        "1": {
                            "name": "note.one-line.start"
                        },
                        "2": {
                            "name": "constant.character.one-line.right.start"
                        }
                    },
                    "end": "(\")",
                    "endCaptures": {
                        "1": {
                            "name": "note.one-line.end"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#formatted"
                        }
                    ]
                },
                {
                    "name": "string.quoted.double.one-line-note",
                    "begin": "(\")",
                    "beginCaptures": {
                        "1": {
                            "name": "note.one-line.start"
                        }
                    },
                    "end": "(\")",
                    "endCaptures": {
                        "1": {
                            "name": "note.one-line.end"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#formatted"
                        }
                    ]
                }
            ]
        },
        "parts.do": {
            "patterns": [
                {
                    "name": "keyword.control.parts.do",
                    "match": "\\b(do)\\b"
                }
            ]
        },
        "parts.data-objects.read": {
            "patterns": [
                {
                    "name": "participant.data-object.stream.read",
                    "begin": "^\\s+(\\[)(\\w+Stream)(\\]) (->) ([\\w+\\.?]+)",
                    "beginCaptures": {
                        "1": {
                            "name": "variable.language.data-object.stream.open"
                        },
                        "2": {
                            "name": "entity.other.attribute-name.participant.name",
                            "patterns": [
                                {
                                    "name": "emphasis",
                                    "match": ".*"
                                }
                            ]
                        },
                        "3": {
                            "name": "variable.language.data-object.stream.close"
                        },
                        "4": {
                            "name": "keyword.operator.new.read.data"
                        },
                        "5": {
                            "name": "event.read",
                            "patterns": [
                                {
                                    "name": "keyword.operator.new.dot.event",
                                    "match": "\\."
                                },
                                {
                                    "name": "variable.name.event",
                                    "match": "\\w+"
                                }
                            ]
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                },
                {
                    "name": "participant.data-object.read",
                    "begin": "^\\s+(\\[)(\\w+)(\\]) (->) ([\\w+\\.?]+)",
                    "beginCaptures": {
                        "1": {
                            "name": "variable.language.data-object.open"
                        },
                        "2": {
                            "name": "entity.other.attribute-name.participant.name"
                        },
                        "3": {
                            "name": "variable.language.data-object.close"
                        },
                        "4": {
                            "name": "keyword.operator.new.read.data"
                        },
                        "5": {
                            "name": "data.read",
                            "patterns": [
                                {
                                    "name": "keyword.operator.new.dot.data",
                                    "match": "\\."
                                },
                                {
                                    "name": "variable.name.data",
                                    "match": "\\w+"
                                }
                            ]
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                }
            ]
        },
        "parts.data-objects.write": {
            "patterns": [
                {
                    "name": "participant.data-object.stream.write",
                    "begin": "^\\s+([\\w+\\.?]+) (->) (\\[)(\\w+Stream)(\\])",
                    "beginCaptures": {
                        "1": {
                            "name": "event.read",
                            "patterns": [
                                {
                                    "name": "keyword.operator.new.dot.event",
                                    "match": "\\."
                                },
                                {
                                    "name": "variable.name.event",
                                    "match": "\\w+"
                                }
                            ]
                        },
                        "2": {
                            "name": "keyword.operator.new.read.data"
                        },
                        "3": {
                            "name": "variable.language.data-object.stream.open"
                        },
                        "4": {
                            "name": "entity.other.attribute-name.participant.name",
                            "patterns": [
                                {
                                    "name": "emphasis",
                                    "match": ".*"
                                }
                            ]
                        },
                        "5": {
                            "name": "variable.language.data-object.stream.close"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                },
                {
                    "name": "participant.data-object.write",
                    "begin": "^\\s+([\\w+\\.?]+) (->) (\\[)(\\w+)(\\])",
                    "beginCaptures": {
                        "1": {
                            "name": "data.read",
                            "patterns": [
                                {
                                    "name": "keyword.operator.new.dot.data",
                                    "match": "\\."
                                },
                                {
                                    "name": "variable.name.data",
                                    "match": "\\w+"
                                }
                            ]
                        },
                        "2": {
                            "name": "keyword.operator.new.read.data"
                        },
                        "3": {
                            "name": "variable.language.data-object.open"
                        },
                        "4": {
                            "name": "entity.other.attribute-name.participant.name"
                        },
                        "5": {
                            "name": "variable.language.data-object.close"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                }
            ]
        },
        "parts.calls": {
            "patterns": [
                {
                    "name": "participant.service.call.method-or-handler",
                    "begin": "^\\s+(\\w+)(\\.)(\\w+)",
                    "beginCaptures": {
                        "1": {
                            "name": "entity.other.attribute-name.participant.name"
                        },
                        "2": {
                            "name": "keyword.operator.new.dot.call"
                        },
                        "3": {
                            "name": "entity.name.function.method-or-handler"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                }
            ]
        },
        "parts.lifeline": {
            "patterns": [
                {
                    "name": "participant.service.lifeline",
                    "begin": "^\\s*([A-Z]\\w+)",
                    "beginCaptures": {
                        "1": {
                            "name": "entity.other.attribute-name.participant.name"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                }
            ]
        },
        "parts.handle-stream": {
            "patterns": [
                {
                    "name": "participant.data-object.stream.handle",
                    "begin": "^\\s*(\\[)(\\w+Stream)(\\])",
                    "beginCaptures": {
                        "1": {
                            "name": "variable.language.data-object.stream.open"
                        },
                        "2": {
                            "name": "entity.other.attribute-name.participant.name",
                            "patterns": [
                                {
                                    "name": "emphasis",
                                    "match": ".*"
                                }
                            ]
                        },
                        "3": {
                            "name": "variable.language.data-object.stream.close"
                        }
                    },
                    "end": "$",
                    "patterns": [
                        {
                            "include": "#comments"
                        }
                    ]
                }
            ]
        },
        "strings": {
            "name": "string.quoted.double.tuc",
            "begin": "\"",
            "end": "\"",
            "patterns": [
                {
                    "include": "#formatted"
                }
            ]
        }
    },
    "scopeName": "source.tuc"
}